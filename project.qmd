---
title: "On the curvature of the Phillips curve"
format: 
  html:
    toc: true
    toc-depth: 3
    toc-location: left
    code-fold: true
---
# Setup

```{r, message = FALSE, warning = FALSE}
# Basic setup
here::i_am("Projet-Data-Management-Elisa-Adriel.Rproj")

# Libraries
library(vroom)
library(dplyr)
library(knitr)
```

# Motivation of the project

The dynamics in the labor market are the most complicated out of all markets, because it mixes the humane reasoning and the economic one. The Phillips curve has always been a reference tool because of the simplicity of the relationship between prices and unemployment it created. This relationship could not only provide an analytically point of view about the conjuncture, but also a policy tool. 
In every economics class, the Phillips curve was said to be negatively slopped, but as one progresses, it realizes that this is less and less the case and that multiple other underlying factors actually drive these two forces. This is what we try to explore today.

# Data and sources

***[Note: at the moment, only OECD database available for me don't know why]{.mark}***

## Sources

Our two sources are from the [OECD Data Explorer's 117 Economic Outlook](https://data-explorer.oecd.org/vis?pg=0&snb=1&vw=ov&df[ds]=dsDisseminateFinalDMZ&df[id]=DSD_EO%40DF_EO&df[ag]=OECD.ECO.MAD&df[vs]=&lb=bt&dq=DEU%2BAUT%2BBEL%2BDNK%2BESP%2BEST%2BFIN%2BFRA%2BGRC%2BHUN%2BISL%2BIRL%2BITA%2BLVA%2BLTU%2BLUX%2BNOR%2BNLD%2BPOL%2BPRT%2BSVK%2BGBR%2BSVN%2BSWE%2BCHE%2BBGR%2BHRV%2BROU.IRS%2BIRCB%2BIRL%2BUN%2BES%2BWSST%2BEE%2BECSA%2BEG%2BHRS%2BLF%2BLFPR1574%2BET%2BET_NA%2BPOP%2BULC%2BPOP1574%2BCPI%2BETPT%2BGDPVTR%2BGDPTR%2BET_ANNPCT%2BTTRADE%2BWRT%2BWAGE%2BPCORE_YTYPCT%2BCPI_YTYPCT%2BUNR%2BPDTY.A&pd=%2C&ly[rw]=REF_AREA&ly[cl]=TIME_PERIOD&ly[rs]=MEASURE&to[TIME_PERIOD]=false&lc=fr) and the World Development Indicator.

```{r, message = FALSE, warning = FALSE}
# Loading OECD data
OECD <- vroom("data/DATA OCDE.csv")
```

## Necessary data manipulation

All the data in OECD is annual and there are many unnecessary columns. We keep only the reference area, measure, time period and observation value of the measure, respectively named `country`, `measure`, `time` and `value`. 

```{r, message = FALSE, warning = FALSE}
OECD |>
  select(`Reference area`, Measure, TIME_PERIOD, OBS_VALUE) |>
  rename(
    country = `Reference area`,
    measure = Measure,
    time = TIME_PERIOD,
    value = OBS_VALUE
  ) |>
  summarise(
    `Countries` = n_distinct(country),
    `Variables` = n_distinct(measure),
    `Start date` = min(time),
    `End date` = max(time)
  ) |>
  kable()
```

# Introduction to a bit of history

## What is the Phillips curve?

The curve was conceptualized by William Phillips in 1958 in the [Economica]{.mark} journal. He apparently observed the negative relationship between the increase in nominal wages and unemployment between 1861 and 1957.

*[**Fun fact**: a few people actually now the true story behind this curve, but according to a friend of Phillips who then worked at the ECB and passed down this story in the Financial Analysis department, Phillips actually computed the curve ... by hand! In fact, he took the data, created 5 or so averages and observed the negative relationship in the graph. This is the true (yet not so sexy and serious) story behind the "statistical observation" of this curve. Although his work was thereafter taken by other brilliant economist, which found (not so strong though) similar relationships.]{.mark}*

He derived the following relationship:

$$
\frac{\Delta W}{W}=\alpha\cdot U^{-\beta}-\gamma
$$

Where $\frac{\Delta W}{W}$ represents the rate of change of nominal wages and $U \geq 0$ represents unemployment. The rest are parameters. This equation has a very practical theoretical reasoning which serves as a strong foundation for wage bargaining theory, which itself lies in the center of labor market economics. When unemployment increases, the firm has more "supply" of potential workers, therefore, their bargaining power decreases, and so does their wages, which in turns create a decrease in prices, because firms can supply more. Vice-versa if unemployment decreases.


## Historical development

## Actual researches on it

The newest researches go as far as to develop an open-economy Phillips curve, where inflation is influenced by both wage levels and the exchange rate:

$$
\pi_t=\gamma_1 \cdot \mathbb{E}_t[\pi_{t+1}]+\gamma_2 \cdot x_t
$$

Where $\gamma_1$ and $\gamma_2$ are parameters, $\pi_t$ represents domestic inflation and $x_t$ is the output gap, depending on the exchange rate. This equation is based on [Gali & Monacelli (2005)](https://crei.cat/wp-content/uploads/users/pages/roes8739.pdf). See Appendix A for full derivation.

## Improvements there could be (according to us)

# Data visualization

# Data analysis

## Numerical model

# Conclusion

# Appendix

## Appendix A: Derivation of the open economy New Keynesian Phillips Curve (NKPC)

Let us have a small, open exchange economy. There is a representative household maximizing infinitely discounted utility:

$$
\arg\max_{C_{t},N_{t}} {\sum_{t=0}^{+\infty}}{\gamma_1^t U(C_{A,t},N_t)}
$$
Where $C_{A,t}$ is composite consumption index, depending on both national consumption $C_t$ and foreign consumption $C_t^{i}$. Every super-indexed variable is a foreign variable. The demand functions arising from optimal goods allocation from the economies' budget constraints is:

$$
C_t(j) = \left(\frac{P_t(j)}{P_t} \right)^{-\varepsilon}\cdot C_t \\
C_t^{i}(j) = \left(\frac{P_t^{i}(j)}{P_t^{i}} \right)^{-\varepsilon}\cdot C_t^{i}
$$
for all goods $i,j\in[0,1]$, for any country $i$, and $P_t$ is the domestic price index and $P^{i}_t$ the foreign one. If we define $P_{A,t}$ as the global consumer price index (CPI), then we can write the domestic and foreign demands as:

$$
C_t(j) = (1-\alpha)\cdot\left(\frac{P_t}{P_{A,t}} \right)^{-\eta}\cdot C_t \\
C_t^{i}(j) = \alpha\cdot\left(\frac{P_t^{i}}{P_{A,t}} \right)^{-\eta}\cdot C_t^{i}
$$
[Where $\alpha$ represents the index of openness of the domestic economy.]{.mark}.  From utility maximization, using a Constant Relative Risk Aversion (CRRA) - Isoelastic utility function, we get the following Euler equation and intratemporal optimality condition:

$$
\gamma_1\cdot \mathbb{E}_t \left[\left(\frac{C_{t+1}}{C_t} \right)^{-\sigma} \cdot \left(\frac{P_{t}}{P_{t+1}} \right)\right]=1 \\
C_t^\sigma \cdot N_t^\phi = \frac{W_t}{P_t}
$$
Which we can log-linearize:

$$
c_t=\mathbb{E}_t[c_{t+1}]-\frac{1}{\sigma}(r_t-\mathbb{E}_t[\pi_{t+1}]-\rho) \\
w_t - p_t = \sigma c_t+\phi n_t
$$

Where inflation is defined as $\pi_t\equiv p_t-p_{t-1}$.


